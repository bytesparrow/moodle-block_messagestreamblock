{"version":3,"file":"popup.min.js","sources":["../src/popup.js"],"sourcesContent":["export const init = () => {\n    const popup = document.getElementById('messagestream-popup');\n    const header = document.getElementById('popupHeader');\n    const openBtn = document.getElementById('openPopup');\n    const closeBtn = document.getElementById('closePopup');\n\n    openBtn.addEventListener('click', () => {\n        popup.classList.remove('hidden');\n\n        // Berechne initiale absolute Position\n        const width = popup.offsetWidth;\n        const height = popup.offsetHeight;\n        const winWidth = window.innerWidth;\n        const winHeight = window.innerHeight;\n\n        popup.style.left = `${(winWidth - width) / 2}px`;\n        popup.style.top = `${(winHeight - height) / 2}px`;\n\n        // Entferne transform – sonst gibt’s Sprünge beim Drag\n        popup.style.transform = 'none';\n    });\n\n\n    closeBtn.addEventListener('click', () => {\n        popup.classList.add('hidden');\n    });\n\n    let isDragging = false;\n    let offsetX = 0;\n    let offsetY = 0;\n\n    header.addEventListener('mousedown', (e) => {\n        isDragging = true;\n\n        const rect = popup.getBoundingClientRect();\n\n        // Position des Klicks relativ zur linken oberen Ecke des Dialogs\n        offsetX = e.clientX - rect.left;\n        offsetY = e.clientY - rect.top;\n\n        // Vor dem Ziehen: transform entfernen, damit absolute Positionen greifen\n        popup.style.left = rect.left + 'px';\n        popup.style.top = rect.top + 'px';\n        popup.style.transform = 'none';\n\n        e.preventDefault(); // Verhindert Textauswahl o.Ä.\n    });\n\n    document.addEventListener('mousemove', (e) => {\n        if (!isDragging || offsetX === undefined || offsetY === undefined) {\n            return;\n        }\n\n        const newLeft = e.clientX - offsetX;\n        const newTop = Math.max(e.clientY - offsetY, 50); // nicht unter Moodle-Menü\n\n        popup.style.left = `${newLeft}px`;\n        popup.style.top = `${newTop}px`;\n    });\n\n    document.addEventListener('mouseup', () => {\n        isDragging = false;\n    });\n};\n"],"names":["popup","document","getElementById","header","openBtn","closeBtn","addEventListener","classList","remove","width","offsetWidth","height","offsetHeight","winWidth","window","innerWidth","winHeight","innerHeight","style","left","top","transform","add","isDragging","offsetX","offsetY","e","rect","getBoundingClientRect","clientX","clientY","preventDefault","undefined","newLeft","newTop","Math","max"],"mappings":"mKAAoB,WACVA,MAAQC,SAASC,eAAe,uBAChCC,OAASF,SAASC,eAAe,eACjCE,QAAUH,SAASC,eAAe,aAClCG,SAAWJ,SAASC,eAAe,cAEzCE,QAAQE,iBAAiB,SAAS,KAC9BN,MAAMO,UAAUC,OAAO,gBAGjBC,MAAQT,MAAMU,YACdC,OAASX,MAAMY,aACfC,SAAWC,OAAOC,WAClBC,UAAYF,OAAOG,YAEzBjB,MAAMkB,MAAMC,gBAAWN,SAAWJ,OAAS,QAC3CT,MAAMkB,MAAME,eAAUJ,UAAYL,QAAU,QAG5CX,MAAMkB,MAAMG,UAAY,UAI5BhB,SAASC,iBAAiB,SAAS,KAC/BN,MAAMO,UAAUe,IAAI,iBAGpBC,YAAa,EACbC,QAAU,EACVC,QAAU,EAEdtB,OAAOG,iBAAiB,aAAcoB,IAClCH,YAAa,QAEPI,KAAO3B,MAAM4B,wBAGnBJ,QAAUE,EAAEG,QAAUF,KAAKR,KAC3BM,QAAUC,EAAEI,QAAUH,KAAKP,IAG3BpB,MAAMkB,MAAMC,KAAOQ,KAAKR,KAAO,KAC/BnB,MAAMkB,MAAME,IAAMO,KAAKP,IAAM,KAC7BpB,MAAMkB,MAAMG,UAAY,OAExBK,EAAEK,oBAGN9B,SAASK,iBAAiB,aAAcoB,QAC/BH,iBAA0BS,IAAZR,cAAqCQ,IAAZP,qBAItCQ,QAAUP,EAAEG,QAAUL,QACtBU,OAASC,KAAKC,IAAIV,EAAEI,QAAUL,QAAS,IAE7CzB,MAAMkB,MAAMC,eAAUc,cACtBjC,MAAMkB,MAAME,cAASc,gBAGzBjC,SAASK,iBAAiB,WAAW,KACjCiB,YAAa"}